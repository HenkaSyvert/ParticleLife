[gd_scene load_steps=34 format=3 uid="uid://bb5yu55jng3ek"]

[ext_resource type="Script" path="res://addons/SimpleSampler/sampler_instrument.gd" id="1_1o4o4"]
[ext_resource type="Script" path="res://scripts/particle_life.gd" id="1_tq84v"]
[ext_resource type="Script" path="res://scripts/sound.gd" id="2_qaoom"]
[ext_resource type="Script" path="res://addons/SimpleSampler/sample_resource.gd" id="2_qj4jq"]
[ext_resource type="Script" path="res://scripts/camera_movement.gd" id="3_drljc"]
[ext_resource type="AudioStream" uid="uid://br2jd1j18u3s3" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/A2_mf1.wav" id="3_trfgc"]
[ext_resource type="AudioStream" uid="uid://c6bsjc4wqptt5" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/A6_mf1.wav" id="4_ojnt6"]
[ext_resource type="AudioStream" uid="uid://b8phiocn4sgmo" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/B3_mf1.wav" id="5_cmxlv"]
[ext_resource type="AudioStream" uid="uid://c0ho1vajtnv71" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/B5_mf1.wav" id="6_sam0k"]
[ext_resource type="AudioStream" uid="uid://c5b58a8jvxaog" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/B6_mf1.wav" id="7_7xwv0"]
[ext_resource type="AudioStream" uid="uid://c888edrfyiwaj" path="res://sounds/ConcertHarp-small-SFZ-20200702/samples/C3_mf3.wav" id="8_0v8b5"]
[ext_resource type="PackedScene" uid="uid://cjlrbt0unonkr" path="res://scenes/menu.tscn" id="12_yjsci"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_es8bu"]
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id="SphereMesh_hga30"]
material = SubResource("StandardMaterial3D_es8bu")

[sub_resource type="MultiMesh" id="MultiMesh_rnxrb"]
transform_format = 1
mesh = SubResource("SphereMesh_hga30")

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_w4oc6"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_g0nml"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_45w8o"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_0akae"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_jylc8"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_db0lp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_eqshp"]
transparency = 4
cull_mode = 1
albedo_color = Color(0.345098, 0.443137, 0.501961, 0.0941176)
metallic = 0.78
metallic_specular = 0.56
metallic_texture = SubResource("NoiseTexture2D_g0nml")
roughness = 0.1
roughness_texture = SubResource("NoiseTexture2D_jylc8")
normal_enabled = true
normal_scale = 0.35
normal_texture = SubResource("NoiseTexture2D_45w8o")
rim = 0.0
anisotropy = 1.0
anisotropy_flowmap = SubResource("NoiseTexture2D_w4oc6")
subsurf_scatter_texture = SubResource("NoiseTexture2D_db0lp")
refraction_scale = 1.0
refraction_texture = SubResource("NoiseTexture2D_0akae")

[sub_resource type="SphereMesh" id="SphereMesh_drbe8"]
material = SubResource("StandardMaterial3D_eqshp")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lyq8f"]
vertex_color_use_as_albedo = true

[sub_resource type="CapsuleMesh" id="CapsuleMesh_u0b18"]
material = SubResource("StandardMaterial3D_lyq8f")
radius = 0.785
height = 7.452

[sub_resource type="MultiMesh" id="MultiMesh_6ql17"]
transform_format = 1
mesh = SubResource("CapsuleMesh_u0b18")

[sub_resource type="Resource" id="Resource_6oo6l"]
script = ExtResource("2_qj4jq")
stream = ExtResource("3_trfgc")
tone = "A"
octave = 2
velocity = 5

[sub_resource type="Resource" id="Resource_16wbn"]
script = ExtResource("2_qj4jq")
stream = ExtResource("4_ojnt6")
tone = "A"
octave = 6
velocity = 5

[sub_resource type="Resource" id="Resource_1n0sy"]
script = ExtResource("2_qj4jq")
stream = ExtResource("5_cmxlv")
tone = "B"
octave = 3
velocity = 5

[sub_resource type="Resource" id="Resource_1gkbf"]
script = ExtResource("2_qj4jq")
stream = ExtResource("6_sam0k")
tone = "B"
octave = 5
velocity = 5

[sub_resource type="Resource" id="Resource_p6ep0"]
script = ExtResource("2_qj4jq")
stream = ExtResource("7_7xwv0")
tone = "B"
octave = 6
velocity = 5

[sub_resource type="Resource" id="Resource_bftpw"]
script = ExtResource("2_qj4jq")
stream = ExtResource("8_0v8b5")
tone = "C"
octave = 3
velocity = 5

[sub_resource type="Environment" id="Environment_m44sp"]

[node name="Game" type="Node"]

[node name="ParticleLife" type="MultiMeshInstance3D" parent="."]
unique_name_in_owner = true
multimesh = SubResource("MultiMesh_rnxrb")
script = ExtResource("1_tq84v")

[node name="UniverseSphere" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(200, 0, 0, 0, 200, 0, 0, 0, 200, 0, 0, 0)
mesh = SubResource("SphereMesh_drbe8")

[node name="NoteStrings" type="MultiMeshInstance3D" parent="."]
unique_name_in_owner = true
multimesh = SubResource("MultiMesh_6ql17")
script = ExtResource("2_qaoom")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 120)
script = ExtResource("3_drljc")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]

[node name="HarpSampler" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
volume_db = -20.0
script = ExtResource("1_1o4o4")
max_notes = 21
samples = Array[ExtResource("2_qj4jq")]([SubResource("Resource_6oo6l"), SubResource("Resource_16wbn"), SubResource("Resource_1n0sy"), SubResource("Resource_1gkbf"), SubResource("Resource_p6ep0"), SubResource("Resource_bftpw")])

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_m44sp")

[node name="Menu" parent="." node_paths=PackedStringArray("particle_life", "sound") instance=ExtResource("12_yjsci")]
particle_life = NodePath("../ParticleLife")
sound = NodePath("../NoteStrings")

[connection signal="attraction_radius_changed" from="Menu" to="ParticleLife" method="_on_menu_attraction_radius_changed"]
[connection signal="enable_sound_changed" from="Menu" to="NoteStrings" method="_on_menu_enable_sound_changed"]
[connection signal="force_strength_changed" from="Menu" to="ParticleLife" method="_on_menu_force_strength_changed"]
[connection signal="max_speed_changed" from="Menu" to="ParticleLife" method="_on_menu_max_speed_changed"]
[connection signal="music_scale_changed" from="Menu" to="NoteStrings" method="_on_menu_music_scale_changed"]
[connection signal="note_cooldown_changed" from="Menu" to="NoteStrings" method="_on_menu_note_cooldown_changed"]
[connection signal="note_string_width_changed" from="Menu" to="NoteStrings" method="_on_menu_note_string_width_changed"]
[connection signal="pressed_restart" from="Menu" to="ParticleLife" method="_on_menu_pressed_restart"]
[connection signal="repel_radius_changed" from="Menu" to="ParticleLife" method="_on_menu_repel_radius_changed"]
[connection signal="run_on_gpu_changed" from="Menu" to="ParticleLife" method="_on_menu_run_on_gpu_changed"]
[connection signal="show_note_strings_changed" from="Menu" to="NoteStrings" method="_on_menu_show_note_strings_changed"]
[connection signal="universe_radius_changed" from="Menu" to="ParticleLife" method="_on_menu_universe_radius_changed"]
[connection signal="wrap_universe_changed" from="Menu" to="ParticleLife" method="_on_menu_wrap_universe_changed"]
